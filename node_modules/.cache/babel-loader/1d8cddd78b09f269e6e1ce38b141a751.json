{"ast":null,"code":"var _jsxFileName = \"/Volumes/Transcend/rk2/sneakersShop-master/src/components/Drawer/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport axios from \"axios\";\nimport styles from \"./Drawer.module.scss\";\nimport Info from \"../Info\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default Drawer;\n\nfunction Drawer(props) {\n  _s();\n\n  const [isComplete, setIsComplete] = React.useState(false);\n  const [orderID, setOrderID] = React.useState(null);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const totalPrice = props.cartItems.reduce((sum, cur) => sum + cur.price, 0);\n\n  async function createOrder() {\n    setIsLoading(true);\n    const orderObj = await axios.post(\"https://629cba363798759975da5f77.mockapi.io/order\", {\n      item: props.cartItems\n    });\n    setOrderID(orderObj.data.id);\n    const {\n      data\n    } = await axios.get(\"https://629cba363798759975da5f77.mockapi.io/cart\");\n\n    for (let i = 0; i < data.length; i++) {\n      await axios.delete(`https://629cba363798759975da5f77.mockapi.io/cart/${data[i].deleteID}`);\n      await setTimeout(() => {}, 200);\n    }\n\n    props.setCartItems([]);\n    setIsLoading(false);\n    setIsComplete(true);\n  }\n\n  const items = props.cartItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.cartItem,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      width: 70,\n      height: 70,\n      src: \"/img/\" + item.img,\n      alt: \"sneakers\",\n      className: styles.cartItemImg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: item.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n        children: [item.price, \" \\u0442\\u0433.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      width: 32,\n      height: 32,\n      src: \"/img/delete.png\",\n      alt: \"delete\",\n      className: styles.delete,\n      onClick: () => props.removeCartItem(item.id)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this)]\n  }, item.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${styles.overlay} ${props.isDrawer && styles.visibleOverlay}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.drawer,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\", /*#__PURE__*/_jsxDEV(\"img\", {\n          width: 32,\n          height: 32,\n          src: \"/img/delete.png\",\n          alt: \"delete\",\n          className: styles.delete,\n          onClick: props.hideDrawer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), props.cartItems.length ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.cartContainer,\n          children: props.cartItems.length ? items : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              width: 120,\n              height: 120,\n              src: \"/img/emptyCart.png\",\n              alt: \"cart is empty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.cartDetails,\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u0418\\u0442\\u043E\\u0433\\u043E:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.filler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [totalPrice, \" \\u0442\\u0433.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u041D\\u0430\\u043B\\u043E\\u0433 5%:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.filler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [Math.round(totalPrice * 0.05), \" \\u0440\\u0443\\u0431.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"greenButton\",\n            disabled: isLoading,\n            onClick: createOrder,\n            children: [\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\", /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/img/arrow.svg\",\n              alt: \"arrow\",\n              className: \"arrow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(Info, {\n        title: isComplete ? \"Заказ оформлен!\" : \"Корзина пустая\",\n        description: isComplete ? `Ваш заказ #${orderID} скоро будет передан курьерской доставке` : \"Добавьте хотя бы одну пару кроссовок, чтобы сделать заказ.\",\n        img: isComplete ? \"orderComplete.png\" : \"emptyCart.png\",\n        hideDrawer: props.hideDrawer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Drawer, \"7BPhuBoyQe1D1OEt3omJP6ohb1k=\");\n\n_c = Drawer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Drawer\");","map":{"version":3,"names":["React","axios","styles","Info","Drawer","props","isComplete","setIsComplete","useState","orderID","setOrderID","isLoading","setIsLoading","totalPrice","cartItems","reduce","sum","cur","price","createOrder","orderObj","post","item","data","id","get","i","length","delete","deleteID","setTimeout","setCartItems","items","map","cartItem","img","cartItemImg","title","removeCartItem","overlay","isDrawer","visibleOverlay","drawer","hideDrawer","cartContainer","cartDetails","filler","Math","round"],"sources":["/Volumes/Transcend/rk2/sneakersShop-master/src/components/Drawer/index.jsx"],"sourcesContent":["import React from \"react\"\nimport axios from \"axios\";\n\nimport styles from \"./Drawer.module.scss\"\n\nimport Info from \"../Info\"\n\nexport default Drawer;\n\nfunction Drawer(props) {\n\n    const [isComplete, setIsComplete] = React.useState(false);\n    const [orderID, setOrderID] = React.useState(null);\n    const [isLoading, setIsLoading] = React.useState(false);\n    \n    const totalPrice = props.cartItems.reduce((sum, cur) => sum + cur.price, 0);\n    \n    async function createOrder(){\n\n        setIsLoading(true);\n\n        const orderObj = await axios.post(\"https://629cba363798759975da5f77.mockapi.io/order\", {item: props.cartItems});\n\n        setOrderID(orderObj.data.id);\n\n        const {data} = await axios.get(\"https://629cba363798759975da5f77.mockapi.io/cart\");\n\n        for(let i = 0; i < data.length; i++){\n            await axios.delete(`https://629cba363798759975da5f77.mockapi.io/cart/${data[i].deleteID}`);\n            await setTimeout(()=>{}, 200);\n        }   \n        \n\n        props.setCartItems([]);\n        setIsLoading(false);\n        setIsComplete(true);\n    }\n\n    const items = props.cartItems.map(item => (\n\n        <div className={styles.cartItem} key={item.id}>\n            <img width={70} height={70} src={\"/img/\" + item.img} alt=\"sneakers\" className={styles.cartItemImg} />\n            <div>\n                <p>{item.title}</p>\n                <b>{item.price} тг.</b>\n            </div>\n            <img width={32} height={32} src=\"/img/delete.png\" alt=\"delete\" className={styles.delete} onClick={() => props.removeCartItem(item.id)} />\n        </div>\n\n    ))\n\n    return (\n        <div className={`${styles.overlay} ${props.isDrawer && styles.visibleOverlay}`}>\n            <div className={styles.drawer}>\n                <h2>\n                    Корзина\n                    <img width={32} height={32} src=\"/img/delete.png\" alt=\"delete\" className={styles.delete} onClick={props.hideDrawer} />\n                </h2>\n\n                {props.cartItems.length\n                    ?\n                    <>\n                        <div className={styles.cartContainer}>\n\n                            {props.cartItems.length ? items :\n                                <div>\n                                    <img width={120} height={120} src=\"/img/emptyCart.png\" alt=\"cart is empty\" />\n                                </div>\n                            }\n                        </div>\n\n                        <div className={styles.cartDetails}>\n                            <ul>\n                                <li>\n                                    <span>Итого:</span>\n                                    <div className={styles.filler}></div>\n                                    <b>{totalPrice} тг.</b>\n                                </li>\n                                <li>\n                                    <span>Налог 5%:</span>\n                                    <div className={styles.filler}></div>\n                                    <b>{Math.round(totalPrice*0.05)} руб.</b>\n                                </li>\n                            </ul>\n\n                            <button className=\"greenButton\" disabled={isLoading} onClick={createOrder}>\n                                Оформить заказ\n                                <img src=\"/img/arrow.svg\" alt=\"arrow\" className=\"arrow\"/>\n                            </button>\n                        </div>\n                    </>\n\n                    :\n                    \n                    <Info\n                        title= {isComplete ? \"Заказ оформлен!\" : \"Корзина пустая\"}\n                        description={isComplete ? `Ваш заказ #${orderID} скоро будет передан курьерской доставке` : \"Добавьте хотя бы одну пару кроссовок, чтобы сделать заказ.\"}\n                        img= {isComplete ? \"orderComplete.png\" : \"emptyCart.png\"}\n                        hideDrawer={props.hideDrawer}\n                    />\n                    \n                }\n\n\n            </div>\n        </div>\n    )\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}